Bootstrap: docker
From: pytorch/pytorch:1.9.1-cuda11.1-cudnn8-runtime

%files
    # Copies the source code for the from the local machine to the container image
    ./UserPrediction6DOF /opt/UserPrediction6DOF
    ./data/interpolated  /opt/data/interpolated
    ./results /opt/results
    requirements.txt /opt
    config.toml /opt

%post
    # Python lives in a Anaconda environment in the container, so the PATH must be adjusted before conda can be called
    # export "PATH=/opt/conda/bin:$PATH"
    # chmod -R 777 /opt/results
    # -B /opt/results
    conda install pip
    pip install -r /opt/requirements.txt
    
%runscript
    # Start the training of LeNet5 on the Cifar10 dataset
    cd /opt
    python -m UserPrediction6DOF run -a lstm -w 100
